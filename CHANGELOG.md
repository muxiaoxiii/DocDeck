# Changelog

All notable changes to DocDeck will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.0.2] - 2024-12-19

### ✨ Added
- **结构化页眉页脚支持**：生成符合PDF规范的页眉页脚，可在Acrobat中正确识别和编辑
- **A4规范化功能**：自动将各种尺寸的PDF调整为标准A4格式，支持旋转页面处理
- **实时预览增强**：渲染真实PDF页面背景，检测文本重叠，支持页码选择
- **中文Unicode支持**：完整的CID字体支持，自动字体检测和映射
- **预设位置按钮**：一键设置右上角/右下角标准位置（距边0.3cm，上下0.8cm）
- **右键菜单功能**：读取现有结构化页眉页脚，删除文件选项
- **命令行接口完善**：支持所有新功能的CLI参数，包括结构化模式、A4规范化等
- **PDF合并增强**：支持添加页码，CLI合并开关

### 🔧 Changed
- **默认字体大小**：从12pt调整为14pt，更适合打印
- **默认位置优化**：页眉页脚位置调整为距边0.3cm，上下0.8cm
- **A4规范化算法**：优先使用CropBox，支持旋转矩阵变换
- **线程管理优化**：处理完成后正确清理线程资源，提升稳定性
- **临时文件管理**：A4规范化临时文件自动清理

### 🐛 Fixed
- **GitHub Actions发布**：修复产物路径不匹配问题，确保正确上传
- **Windows构建**：修复PowerShell路径检查和压缩命令
- **Linux构建**：增强命令容错性，处理空目录情况
- **macOS构建**：create-dmg依赖问题，添加hdiutil回退方案
- **字体处理**：修复中文字符显示问题，统一加密状态枚举使用
- **递归目录扫描**：修复sort_by_mtime参数传递问题

### 🗑️ Removed
- **冗余代码**：清理无效的Signal声明，移除未使用的导入
- **临时文件**：删除pdf_handler的副本文件，合并功能到主文件

### 📚 Documentation
- **README完全重写**：添加详细功能说明、安装指南、使用示例
- **CLI文档**：完整的命令行参数说明和示例
- **故障排除**：常见问题解决方案和日志文件说明

## [2.0.0] - 2024-12-18

### ✨ Added
- **批量PDF处理**：支持单个文件、文件夹或递归目录扫描
- **智能页眉页脚**：可自定义字体、大小、位置和内容
- **PDF合并功能**：支持拖拽排序和合并预览
- **PDF解锁功能**：支持移除打开密码与权限限制
- **跨平台支持**：Windows、macOS、Linux
- **命令行批处理**：适用于自动化脚本及集成流程
- **实时预览**：调整设置时预览区域实时同步更新
- **自动编号**：支持位数自定义，如001、0001等格式

### 🔧 Changed
- **UI框架升级**：从PySide2升级到PySide6 (Qt6)
- **PDF处理库**：集成PyPDF2、PyMuPDF、pikepdf、ReportLab
- **字体管理**：自动扫描PDF内容，提取并推荐原始字体风格

### 🐛 Fixed
- **字体替换问题**：修复字体替换不生效问题，确保中英文字符完整显示
- **加密文件处理**：检测到加密PDF时自动提示，用户可选择是否解密继续处理

## [1.0.0] - 2024-12-17

### ✨ Added
- **基础PDF处理功能**
- **简单页眉页脚添加**
- **基本GUI界面**

---

## 开发计划

### 近期计划 (v2.1.0)
- [ ] 单位切换功能（pt/cm/mm）
- [ ] 页眉模板系统
- [ ] 更强的内容识别（非Artifact页眉页脚）
- [ ] 大文件内存优化

### 中期计划 (v2.2.0)
- [ ] macOS代码签名和公证
- [ ] Windows安装器生成
- [ ] 性能监控和优化
- [ ] 插件系统架构

### 长期计划 (v3.0.0)
- [ ] 云端处理支持
- [ ] 批量任务队列
- [ ] 多用户权限管理
- [ ] API接口开放

---

## 贡献者

感谢所有为DocDeck做出贡献的开发者！

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件
